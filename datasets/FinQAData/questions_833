what was the change in the warranty reserve in 2017 in thousands
